!function(){function t(t,n){var e=this;e.cities=[],e.$onInit=function(){e.setup()},e.setup=function(){e.newCity={},e.newCity.attractions=[],e.showAddCity=!1,e.listCities(),e.countVisitedCities()},e.listCities=function(){t.getCities().then(function(t){e.cities=t}).catch(function(t){n.danger(t)})},e.addCity=function(i){t.addCity(i).then(function(t){e.setup()}).catch(function(t){n.danger(t)})},e.countVisitedCities=function(){t.countVisitedCities().then(function(t){e.visitedCount=t}).catch(function(t){n.danger(t)})},e.setVisitedStatus=function(i){i.visited=!i.visited,t.editCity(i.name,i).then(function(t){e.setup()}).catch(function(t){n.danger(t)})}}angular.module("app").component("citiesComponent",{templateUrl:"/app/components/cities.template.html",controllerAs:"model",controller:["citiesService","ngToast",t]})}(),function(){angular.module("app").factory("citiesService",["$http","$q",function(t,n){function e(){return t.get(config.baseUri+"cities").then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function i(e){return t.post(config.baseUri+"cities/",e).then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function s(e,i){return t.put(config.baseUri+"cities/"+e,i).then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function c(){return t.get(config.baseUri+"cities/visited").then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}return{getCities:e,addCity:i,editCity:s,countVisitedCities:c}}])}();