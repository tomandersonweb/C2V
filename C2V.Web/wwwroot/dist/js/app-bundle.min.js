!function(){function t(t){var i=this;i.cities=[],i.$onInit=function(){i.setup()},i.setup=function(){i.newCity={},i.newCity.attractions=[],i.showAddCity=!1,i.listCities(),i.countVisitedCities()},i.listCities=function(){t.getCities().then(function(t){i.cities=t}).catch(function(t){})},i.addCity=function(e){t.addCity(e).then(function(t){i.setup()}).catch(function(t){})},i.countVisitedCities=function(){t.countVisitedCities().then(function(t){i.visitedCount=t}).catch(function(t){})},i.setVisitedStatus=function(e){e.visited=!e.visited,t.editCity(e.city,e).then(function(t){i.setup()}).catch(function(t){})}}angular.module("app").component("citiesComponent",{templateUrl:"/app/components/cities.template.html",controllerAs:"model",controller:["citiesService",t]})}(),function(){angular.module("app").factory("citiesService",["$http","$q",function(t,i){function e(){return t.get(config.baseUri+"cities").then(function(t){return t.data}).catch(function(t){return i.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function n(e){return t.post(config.baseUri+"cities/",e).then(function(t){return t.data}).catch(function(t){return i.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function s(e,n){return t.put(config.baseUri+"cities/"+e,n).then(function(t){return t.data}).catch(function(t){return i.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function c(){return t.get(config.baseUri+"cities/visited").then(function(t){return t.data}).catch(function(t){return i.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}return{getCities:e,addCity:n,editCity:s,countVisitedCities:c}}])}();